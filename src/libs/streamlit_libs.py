import streamlit as st
import os
import json
import pandas as pd

streamlit_app_content = os.path.join("src", "streamlit_app_content")
streamlit_app_output = os.path.join("src", "streamlit_app_output")
streamlit_temp_apks = os.path.join("src", "streamlit_app_content",  "apks")
streamlit_temp_json = os.path.join("src", "streamlit_app_content", "json")


def apply_custom_css():
    '''
    Apply custom CSS to Streamlit app
    '''
    with open(r"src\pages\css\styles.css", 'r') as f:
        custom_css = f.read()
        custom_css = "<style>" + custom_css + "</style>"
    st.markdown(custom_css, unsafe_allow_html=True)


def display_csv_headers(file_path: str) -> pd.DataFrame:
    '''
    Display CSV headers, Load CSV file and return data

    Args:
        file_path (str): File path of CSV file

    Returns:
        pd.DataFrame: CSV data
    '''

    if os.path.exists(file_path):
        df = pd.read_csv(file_path, header=None)
        return df
    else:
        docs_link = "[docs](https://github.com/rakshith111/AndroidMalwareSleuth/blob/main/RandomForest/Datasets/ChimeraDataset/README.md)"
        st.warning(
            f"## :warning: PLEASE BUIILD HEADER CSV FILE :warning: \nRefer to the {docs_link} file for more information")
        return None


def load_json(json_file_path: str) -> dict:
    '''
    Load JSON file and return data

    Args:
        json_file_path (str): File path of JSON file

    Returns:
        dict: JSON data
    '''
    try:
        with open(json_file_path) as json_file:
            data = json.load(json_file)
        if len(data) == 0:
            data={None}
        return data, len(data)
    except Exception as e:
        st.error(f"Error loading JSON file: {e}")
        return None,None

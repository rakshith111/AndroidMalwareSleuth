# Use the official TensorFlow Serving image as the base image
FROM tensorflow/serving
WORKDIR /
# Copy the entire models directory into the container

# # CHANGE THIS TO YOUR OWN MODEL DIRECTORY

# COPY ZIP
COPY Models/DEFAULT.zip /models/DEFAULT.zip
RUN apt update
RUN apt-get install -y unzip
RUN unzip /models/DEFAULT.zip -d /models/
COPY Models/DEFAULT/models/ /models/
RUN rm -rf /models/DEFAULT
RUN rm -rf /models/DEFAULT.zip


# Expose the ports for gRPC and REST API
EXPOSE 8500 8501


# Set the command for TensorFlow Serving with the environment variables


CMD ["--model_config_file=/models/models.config","--port=8500","--rest_api_port=8501","--model_config_file_poll_wait_seconds=60"]
